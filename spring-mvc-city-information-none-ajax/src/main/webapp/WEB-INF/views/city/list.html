<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="application/json; charset=UTF-8"/>
    <title>Customer Information</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script th:src="@{/js/sweetalert2.min.js}"></script>
    <link rel="stylesheet" th:href="@{/css/sweetalert2.min.css}">
    <script src="https://cdn.jsdelivr.net/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.15.1/jquery.validate.min.js"></script>
    <link rel="stylesheet" href="//cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        /*#abc{*/
        /*    margin-top: 30px;*/
        /*    border: 1px solid black;*/
        /*    padding-left: 0 !important;*/
        /*    padding-right: 0 !important; ;*/
        /*}*/
    </style>
</head>
<body>
<h1 class="text-center"><strong>City Information</strong></h1>
<div class="container">
    <a href="/create-city" class="btn btn-outline-primary " >Create City</a>
</div>
<div style="display: none" th:if="${msg_delete != null}" th:text="${msg_delete}" id="delete_msg">
</div>
<div style="display: none" th:if="${msg_edit != null}" th:text="${msg_edit}" id="edit_msg">
</div>
<div style="display: none" th:if="${msg_create != null}" th:text="${msg_create}" id="create_msg">
</div>
<form th:action="@{/cities}" th:object="${cities}" method="get">
    <div class="container" id="abc">
        <table class="table table-bordered ">
            <thead>
            <tr>
                <th>#</th>
                <th>Name</th>
                <th>Country</th>
                <th class="text-center">Action</th>
            </tr>
            </thead>
            <tbody th:each="city : ${cities}">
            <tr>
                <td>
                    <a th:href="@{/view/__${city.city_id}__}" th:text="${city.city_id}"></a>
                </td>
                <td th:text="${city.city_name}"></td>
                <td th:if="${city.country}" th:text="${city.country.country_name}"></td>
                <td th:unless="${city.country}"></td>
                <td class="text-center">
                    <a th:href="@{/edit-city/__${city.city_id}__ }" class="btn btn-outline-primary"><i class="far fa-edit"></i>Edit</a>
                    <a th:href="@{/delete-city/__${city.city_id}__ }" class="btn btn-outline-danger"><i  class="fas fa-trash-alt"></i>Delete</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</form>


</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
<script>
    if ($("#delete_msg").val() != null){
        showDelete();
    }
    function showDelete(){
        Swal.fire(
            'Deleted!',
            'The city has been removed from the list.',
            'success'
        );
    }

    if ($("#edit_msg").val() != null){
        showEdit();
    }
    function showEdit(){
        Swal.fire(
            'Edit!',
            'The city has been edit from the list.',
            'success'
        );
    }

    if ($("#create_msg").val() != null){
        showCreate();
    }
    function showCreate(){
        Swal.fire(
            'Create!',
            'The city has been create from the list.',
            'success'
        );
    }
</script>
</html>